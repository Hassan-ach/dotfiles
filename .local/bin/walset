#!/bin/bash
WALL_DIR="$HOME/wall"
#
[ ! -d "$WALL_DIR" ] && { echo "Error: Directory not found."; exit 1; }

# WALLPAPERS=$(find "$WALL_DIR" -maxdepth 1 -type f \( -iname "*.png" -o -iname "*.jpg" -o -iname "*.gif" \) | shuf -n 10)

# [ -z "$WALLPAPERS" ] && { echo "No wallpapers found."; exit 1; }

# SEL=$(echo "$WALLPAPERS" | rofi -dmenu -p "Select")
#
# SEL=&(for a in $WALLPAPERS; do echo -en "$a\0icon\x1f$a\n" ; done | rofi -dmenu)

# SEL=&(for a in $WALL_DIR/*; do echo -en "$a\0icon\x1f$a\n" ; done | rofi -dmenu  -p "" -format i -theme-str 'element-icon { size: 200px;} configuration {drun-display-format: "{name}";} ')

# [ -n "$SEL" ] && walset-backend "$SEL"

random_wallpaper=$(find ~/wall -type f \( -iname "*.jpg" -o -iname "*.jpeg" -o -iname "*.png" -o -iname "*.gif" \) | shuf -n 1)

ln -sf "$random_wallpaper" /tmp/random_bg

walset-backend "$random_wallpaper"
